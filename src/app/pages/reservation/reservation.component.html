<div class="container mt-5">
  <h2>R√©server une s√©ance</h2>

  <!-- Choix du cin√©ma -->
  <div class="mb-3">
    <label for="cinema">Choisissez un cin√©ma :</label>
    <select id="cinema" class="form-select" [(ngModel)]="selectedCinema">
      <option value="" disabled>-- S√©lectionner --</option>
      <option *ngFor="let c of cinemas" [value]="c">{{ c }}</option>
    </select>
  </div>

  <!-- Choix du film -->
  <div class="mb-3">
    <label for="film">Choisissez un film :</label>
    <select id="film" class="form-select" [(ngModel)]="selectedFilmId">
      <option [ngValue]="null" disabled>-- S√©lectionner --</option>
      <option *ngFor="let film of films" [ngValue]="film._id">{{ film.titre }}</option>
    </select>
  </div>

  <!-- R√©sum√© s√©lection -->
  <div *ngIf="afficherSeances()" class="alert alert-info">
    üé¨ Vous avez s√©lectionn√© : <strong>{{ filmSelectionne?.titre }}</strong>
    au cin√©ma <strong>{{ selectedCinema }}</strong>.
    <br />
    (Les s√©ances s‚Äôafficheront ici √† l‚Äô√©tape suivante)
  </div>

  <!-- Liste des s√©ances -->
  <div class="mt-4" *ngIf="seancesFiltrees.length">
    <h5>S√©ances disponibles :</h5>
    <ul class="list-group">
      <li class="list-group-item d-flex justify-content-between align-items-center"
          *ngFor="let s of seancesFiltrees">
        <div>
          <strong>{{ s.jour }}</strong> ‚Äî {{ s.debut }} √† {{ s.fin }} ({{ s.qualite }})
        </div>
        <div>
          <strong>{{ s.prix }} ‚Ç¨</strong>
          <button class="btn btn-sm btn-outline-primary ms-3" (click)="selectionnerSeance(s)">
            R√©server cette s√©ance
          </button>
        </div>
      </li>    
    </ul>

    <!-- Formulaire de r√©servation -->
    <div *ngIf="seanceSelectionnee" class="mt-4 p-4 border rounded bg-light">
      <h5>R√©servation pour {{ filmSelectionne?.titre }} ‚Äî {{ selectedCinema }}</h5>
      <p>S√©ance : {{ seanceSelectionnee.jour }} √† {{ seanceSelectionnee.debut }} ({{ seanceSelectionnee.qualite }})</p>

      <div class="mb-3">
        <label for="places">Nombre de places :</label>
        <input type="number" id="places" class="form-control" [(ngModel)]="nbPlaces" min="1" max="10" />
      </div>

      <p><strong>Prix unitaire :</strong> {{ seanceSelectionnee.prix }} ‚Ç¨</p>
      <p><strong>Total :</strong> {{ seanceSelectionnee.prix * nbPlaces || 0 }} ‚Ç¨</p>

      <button class="btn btn-success mt-2" [disabled]="false" (click)="validerReservation()">
        Valider la r√©servation
      </button>
    </div>
  </div>
</div>
