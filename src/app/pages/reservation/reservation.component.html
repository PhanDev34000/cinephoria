<div class="container mt-4">
  <h3>ğŸŸï¸ RÃ©server une sÃ©ance</h3>

  <!-- Choix de la ville -->
  <div class="mb-3">
    <label for="villeSelect" class="form-label">Choisissez une ville :</label>
    <select id="villeSelect" class="form-select" [(ngModel)]="selectedVille" (change)="filtrerFilmsParVille(); afficherSeances()">
      <option [ngValue]="''" disabled>-- SÃ©lectionner une ville --</option>
      <option *ngFor="let ville of cinemas" [ngValue]="ville">{{ ville }}</option>
    </select>
  </div>

  <!-- Choix du film -->
  <div class="mb-3">
    <label for="filmSelect" class="form-label">Choisissez un film :</label>
    <select id="filmSelect" class="form-select" [(ngModel)]="selectedFilmId" (change)="afficherSeances()">
      <option [ngValue]="null" disabled>-- SÃ©lectionner un film --</option>
      <option *ngFor="let f of filmsFiltres" [ngValue]="f._id">{{ f.titre }}</option>
    </select>
  </div>

  <!-- Liste des sÃ©ances filtrÃ©es -->
  <div *ngIf="seancesFiltrees.length > 0">
    <h5 class="mt-4">SÃ©ances disponibles :</h5>
    <ul class="list-group mb-4">
      <li *ngFor="let s of seancesFiltrees"
          class="list-group-item d-flex justify-content-between align-items-center"
          [class.active]="seanceSelectionnee === s"
          (click)="selectionnerSeance(s)">
        <div>
          ğŸ“… {{ s.jour }} - ğŸ•’ {{ s.debut }} Ã  {{ s.fin }} - ğŸ¬ {{ s.qualite }} - ğŸ’¶ {{ s.prix }} â‚¬ - ğŸ« {{ s.placesDisponibles }} places
        </div>
      </li>
    </ul>
  </div>

  <!-- Formulaire de rÃ©servation -->
  <div *ngIf="seanceSelectionnee">
    <h5 class="mt-4">ğŸ¯ RÃ©server la sÃ©ance sÃ©lectionnÃ©e</h5>
    <form (ngSubmit)="validerReservation()">
      <div class="mb-3">
        <label for="nbPlaces" class="form-label">Nombre de places :</label>
        <input
          type="number"
          id="nbPlaces"
          class="form-control"
          [(ngModel)]="nbPlaces"
          name="nbPlaces"
          min="1"
          [max]="seanceSelectionnee.placesDisponibles"
          required
        />
      </div>
      <button type="submit" class="btn btn-primary">âœ… RÃ©server</button>
    </form>
  </div>
</div>
